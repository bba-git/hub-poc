# Cursor Context for HPV PoC with Supabase\
\
## \uc0\u55358 \u56813  Project Purpose\
Build a lightweight proof of concept (PoC) for the HPV platform using only Supabase for authentication, database, and audit logs. The platform remains compliant with standard enterprise practices (RBAC, DTOs, audit, modular design).\
\
## \uc0\u55358 \u56817  Tech Stack (PoC)\
- Framework: NestJS (Node.js)\
- Database: Supabase Postgres\
- Auth: Supabase Auth (JWT + Email/Password)\
- Logs: Custom `audit_log` table (instead of Azure Monitor)\
- Metrics: Optional (via log inserts or skipped)\
- Tests: Jest (unit + integration)\
\
## \uc0\u55357 \u56513  Folder Structure Convention\
```\
src/\
\uc0\u9500 \u9472 \u9472  auth/\
\uc0\u9474    \u9500 \u9472 \u9472  auth.module.ts\
\uc0\u9474    \u9500 \u9472 \u9472  auth.service.ts\
\uc0\u9474    \u9500 \u9472 \u9472  auth.controller.ts\
\uc0\u9474    \u9500 \u9472 \u9472  auth.service.spec.ts\
\uc0\u9474    \u9500 \u9472 \u9472  dto/\
\uc0\u9474    \u9474    \u9492 \u9472 \u9472  login.dto.ts\
\uc0\u9474    \u9492 \u9472 \u9472  guards/\
\uc0\u9474        \u9492 \u9472 \u9472  roles.guard.ts\
\uc0\u9500 \u9472 \u9472  supabase/\
\uc0\u9474    \u9500 \u9472 \u9472  supabase.module.ts\
\uc0\u9474    \u9492 \u9472 \u9472  audit-log.service.ts\
```\
\
## \uc0\u55357 \u56523  Compliance Goals\
- All actions logged in `audit_log` table (user_id, action, status, timestamp)\
- All endpoints guarded (auth + RBAC)\
- All DTOs validated with class-validator\
- No public key or secret hardcoded\
\
## \uc0\u55357 \u56592  Security Assumptions\
- Supabase handles user sessions with JWT\
- RBAC and RLS (Row Level Security) are enforced at API + DB levels\
\
## \uc0\u9881 \u65039  Developer Principles\
- Logs must trace mutations and auth attempts\
- Every controller is paired with a test file\
- Coverage must follow `test-strategy.md`\
}