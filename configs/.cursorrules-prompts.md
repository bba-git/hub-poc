# \uc0\u55357 \u56516  Common Cursor Prompts for HPV Platform\
\
## \uc0\u55358 \u56817  Service with Observability & DI\
```text\
Create a NestJS service for \{\{FeatureName\}\}. It must:\
- Use dependency injection\
- Include structured JSON logging with traceID and userID\
- Export a /health and /metrics endpoint\
- Emit Prometheus-compatible metrics\
```\
\
## \uc0\u55357 \u57057 \u65039  Secured API Endpoint\
```text\
Build a NestJS controller for \{\{Entity\}\} with:\
- RBAC guard (check roles: notary, client, staff)\
- DTO validation using class-validator\
- Swagger/OpenAPI annotation\
- Logging of failed accesses\
```\
\
## \uc0\u55358 \u56810  Unit Test Generator\
```text\
Write unit tests for all public methods of \{\{ServiceName\}\}:\
- Mock injected services\
- Check that logs are emitted\
- Validate Prometheus counters if present\
```\
\
## \uc0\u55357 \u56577  Event Handler\
```text\
Generate a NestJS event handler subscribed to topic "\{\{EventTopic\}\}".\
- It must validate the payload schema\
- Emit a structured log\
- Retry on failure (up to 3x)\
```\
\
## \uc0\u55357 \u56541  DTO and Swagger Prompt\
```text\
Create a DTO for \{\{EntityName\}\} input payload. Use class-validator decorators.\
Expose this DTO in Swagger using @ApiBody and @ApiProperty decorators.\
```\
\
## \uc0\u55357 \u56594  Audit-Logged Service Method\
```text\
Add a method to \{\{ServiceName\}\} that performs \{\{Action\}\}, and:\
- Logs action with TraceID, UserID, status\
- Calls LoggerService.audit("\{\{Entity\}\}", \{\{Action\}\}, \{\{Result\}\}, \{\{Metadata\}\})\
}